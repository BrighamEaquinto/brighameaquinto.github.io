---
title: "Lesson 6: Graphing 2/2"
toc: true
fig-align: center
fig-width: 8
fig-height: 3.5
code-copy: true
code-overflow: wrap
code-line-numbers: true
code-fold: true
code-tools: true
eval: true
message: false
warning: false
# toc: true
---

```{r}
#| code-fold: false
#| code-summary: "Data use in graphs below"
 
library(tidyverse)

dat <- read_csv("https://raw.githubusercontent.com/BrighamEaquinto/brighameaquinto.github.io/master/datasets/insurance.csv")
```

## Labeling 
#### `labs()`

**Explanation**

The `labs()` function is used to add label to the plot like the x-axis, the y-axis, and title. 


**Options**: 

- title 
- subtitle  
- caption 
- x 
- y


**Example**

```{r}
ggplot(dat, aes(x = region, fill = sex))+
    geom_bar()+ 
    labs(title = "Counts of Regions", x = "Regions", y = "Amount", fill = "Sex")+ 
    theme_bw()
```

 

## Faceting
### `facet_wrap()` & `facet_grid()`
This of faceting as a third variable. 

- `facet_wrap()` 


```{r}
#| echo: false
#| fig.height: 5

color <- ggplot(dat, aes(x = region, fill = sex))+
            geom_bar()+ 
            labs(title = "Non-Faceted Graph", x = "", y = "Amount", fill = "Sex")+
            theme(
                title = element_text(size = 20), 
                axis.title = element_text(size = 10), 
                legend.title = element_text(size = 10))


facet <- ggplot(dat, aes(x = region, fill = sex))+
            geom_bar()+ 
            facet_wrap(~sex)+
            # facet_wrap(rows = vars(sex))+
            labs(title = "Faceted Graph", x = "", y = "Amount", fill = "Sex")+
            theme(
                title = element_text(size = 20), 
                axis.title = element_text(size = 10), 
                legend.title = element_text(size = 10), 
                legend.position = "none")

ggpubr::ggarrange(color, facet, nrow = 2)
```

```{r}
#| code-fold: true
#| code-summary: "Code"
#| eval: false
ggplot(dat, aes(x = region, fill = sex))+
            geom_bar()+ 
            facet_wrap(~sex)+
            labs(title = "Faceted Graph", x = "", y = "Amount", fill = "Sex")+
            theme(
                title = element_text(size = 20), 
                axis.title = element_text(size = 10), 
                legend.title = element_text(size = 10), 
                legend.position = "none")
```

## Themes 

The following theme options affect all the non-data aspects

- `+ theme_bw()`
- `+ theme_linedraw()`
- `+ theme_light()`
- `+ theme_dark()`
- `+ theme_minimal()`
- `+ theme_classic()`
- `+ theme_void()`
- `+ theme_test()`



## Coloring

#### Aesthetic

It is possible to set colors dynamically based on column or to set it as a static color.   

Setting colors dynamically and statically. 


```{r}
#| echo: false
#| fig.height: 2

tl <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length), fill = "orange")
tl
```
```{r}
#| echo: false
#| fig.height: 2

tr <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length, fill = Species))
tr
```


:::{.callout-tip collapse="true"}
## Further Reading


#### Fill vs. Color

`fill = 'orange'` 

`color` left as default 
```{r}
#| fig.height: 2
#| echo: false

tl <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length), fill = "orange")+
  scale_x_continuous(breaks = c(0:10))+
  labs(x = "Petal Length", y = "Count")
tl
```

<br> 

`fill` left as default 

`color = 'black'` 
```{r}
#| fig.height: 2
#| echo: false

tm <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length), color = "black")+
  scale_x_continuous(breaks = c(0:10))+
  labs(x = "Petal Length", y = "Count")
tm
```

<br> 

`fill = 'orange'` 

`color = 'black'`  
```{r}
#| fig.height: 2
#| echo: false

bl <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length), fill = "orange", color = "black")+
  scale_x_continuous(breaks = c(0:10))+
  labs(x = "Petal Length", y = "Count")
bl
```

<br> 

You can do a combination of inside and outside. 

`fill = 'orange'` inside aesthetic

`color = Species` outside aesthetic. Notice this is a column in the dataset, not a static color. 
```{r}
#| echo: false
#| fig.height: 2

br <- ggplot(iris)+ 
  geom_bar(aes(x = Petal.Length, fill = Species), color = "black")+
  scale_x_continuous(breaks = c(0:10))+
  labs(x = "Petal Length", y = "Count")
br
```



:::

<!-- ## Multiple Geoms

## Other 

- colors 
- geom_text()/geoom_label()  
- labs() 
- themes()  
- legend 
- facet_wrap()  
- geom_boxplot() is often used with geom_jitter() to make powerful visualizations.
- geom_bar() position argument
- geom_jitter()
- geom_text()
- scales:
  - scale_x_continuous() 
  - scale_y_continuous() 
  - scale_colour_discrete()
- ggsave("my-plot.pdf")


```{r}
base <- ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class))

base + theme(legend.position = "left")
base + theme(legend.position = "top")
base + theme(legend.position = "bottom")
base + theme(legend.position = "right") # the default
```


![](pictures/ggplot_themes.jpg)










<br><br>




## aes() Athestic

- shape
- size
- color 
- alpha
- linetype 
- group

```{r}
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species, size = 10))+
  geom_point(aes(shape = Species))+
  geom_smooth(method='lm', aes(linetype = Species))
```

```{r}
ggplot(iris, aes(Sepal.Width, Sepal.Length, size = 10, color = "red"))+
  geom_point(aes(shape = Species))+
  geom_smooth(method='lm', aes(linetype = Species))
```


## Coloring 

- the color and fill arguments are accepted inside the aes(). What about outside?


- color is the boarder color
- fill is the fill color

- you can set hard colors or set it to a column in your dataset
- R accepts color names in quotes and hex codes

- `scale_fill_manual()`
- `scale_color_manual()`
 -->
