---
title: "Lesson 3: Wangling Data: First Three Verbs"
toc: true
code-overflow: scroll
code-line-numbers: true
---

```{r}
#| echo: false
#| massage: false
#| warning: false

library(tidyverse)
```

This lesson is focused on the first three wrangling verbs: `select()`, `filter()`, and `mutate()`. 

:::{.callout-tip}
### Explanation
`select()` is used to specify which columns to use as opposed to default to all of the columns

`filter()` is used to subset data based on specified criteria

`mutate()` is used to make new columns of data
:::

This will be our starting dataframe used in each of the examples below. 

::: columns
::: {.column width="10%"}
:::
::: {.column width="70%"}
```{r}
#| echo: false
knitr::kable(head(mpg, 5))
```
:::
::: {.column width="10%"}
:::
:::

<!-- ::: columns
::: {.column width="35%"}

### Scenario

:::
::: {.column width="3%"}
:::
::: {.column width="62%"}

:::
::: -->

<br> 

## Selecting Columns 

**Syntax**: `select()`

Think of it as selecting check boxes for each column to use. Any selected, whether it's just one column or whether they're many columns, will be available once this `select()` code is completed.

::: columns
::: {.column width="35%"}
### Scenario
Say we want this dataframe to the right where not all of the columns are needed, only the **manufacturer**, **model**, **cty**, and **hwy** columns. `select()` allows us to achieve this. 

:::
::: {.column width="3%"}
:::
::: {.column width="62%"}
```{r}
#| echo: false

data <- mpg %>% 
    select(manufacturer, model, cty, hwy) %>% 
    head(5)

knitr::kable(data)
```
:::
:::

### Code Solution
```{r}
#| eval: false
mpg %>% 
    select(manufacturer, model, cty, hwy)
```

<!-- <iframe 
    src="https://r4ds.had.co.nz/transform.html?q#select" 
    style="border:1px solid black;"
    width="100%"
    height="500" 
></iframe> -->


<br> 

## Filtering Rows 

**Syntax**: `filter()`

Filtering is used in the scenarios like, "Only need students that are age 16 years old", or "Only the the redwood trees in this forest that are taller than 30 ft". 

::: columns
::: {.column width="35%"}
### Scenario
Say we want this dataframe to the right where **the cars are made by ford** (`manufacturer` column) and **the amount of highway miles per gallon is greater than 20** (`hwy` column). `filter()` allows allows us to achieve this. 
:::
::: {.column width="3%"}
:::
::: {.column width="62%"}
```{r}
#| echo: false

data <- mpg %>%
    filter(manufacturer == "ford", hwy > 20) %>% 
    head()

knitr::kable(data)
```
:::
:::
### Code Solution
```{r}
#| eval: false
mpg %>%
    filter(manufacturer == "ford", hwy > 20)


filter(iris, Sepal.Length != '5.1') %>% head() 
filter(iris, Species != 'setosa', Sepal.Length != 7) %>% head() 

filter(iris, Species != c('setosa', 'versicolor')) %>% head() 
filter(iris, !Species %in% c('setosa', 'versicolor')) %>% head() 

```

:::{.callout-tip collapse="true"}
### Operators to use in Filter Statements

::: columns
::: {.column width="40%"}

**Basic Operators**:

`>` greater than

`<` less than

`==` equals

`>=` greater than or equal to

`<=` less than or equal to 
:::
::: {.column width="10%"}
:::
::: {.column width="40%"}

**Advace Operators** 

`!=` is not equal to 

`%in% c()` is in 

:::
:::
:::

<br>

## Making New Columns 

**Syntax**: `mutate()`

Think of the `mutate()` verb as starting with one column and change it to where you want it to become--mutating a column. You can make new columns not based on columns, based on one column, or based on multiple columns.  

::: columns
::: {.column width="35%"}
### Scenario
Say we want this dataframe to the right (make sure to scroll to see the other columns) where there was an error in the data and **the city miles per gallon needs 5 more miles than what it currently had** (`cty` column) and **we need the a column for the engine displacement** (`displ` column) **divided by the number of cylinders** (`cyl`column). In reality this second task is not a useful but we're doing it for practice sake. 
:::
::: {.column width="3%"}
:::
::: {.column width="62%"}
```{r}
#| echo: false

data <- mpg %>%
    mutate(cty = cty + 5, new_col = displ/cyl) %>% 
    head()

knitr::kable(data)
```
:::
:::
### Code Solution
```{r}
#| eval: false
mpg %>%
    mutate(cty = cty + 5, new_col = displ/cyl)
```


## Practice Exercises

